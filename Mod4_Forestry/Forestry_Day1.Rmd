Module 4: Forestry Management

# Vignette
Members of the K'avi tribe have managed a forest on their lands for decades. Recently, tribal forestry managers have started collecting data from a few different sites in the forest. They would like to set up a location for managing and harvesting Douglas firs for lumber. It is your job to analyze the data and determine which of the proposed sites would be the best for a harvest.

**NOTE TO SKC?ND DEVELOPERS:**

Learning goals for this module:

The goal of the first day of the this forestry module is to have the students replicate what they did in the first 3 modules all at once and to do so more independently than previously. 

Things this module should include are: 

1. Min, max, median, mean review.  

2. Maximum sustained yield. 

3. More time-series exploration

4. More complex data visualization. 

**END NOTE TO DEVELOPERS**

# PART 1: INtroducing the data

**Setting up the session**
```{r}
# CLearing the environment
rm(list = ls())
# Setting the working directory
current_path = rstudioapi::getActiveDocumentContext()$path
setwd(dirname(current_path))
# Loading packages
library(tidyverse)
```

**Read in data**

Throughout the time that the tribal forestry managers have been caring for the forest, they found that there are many factors that affect the quality of a given site. Components such as altitude, aspect, soil, and rainfall, as well as the combination of these factors have an effect on the productivity of a site. 

1. Altitude affects productivity by shortening the length of the growing season and lowering the mean temperature. At high altitude, growth begins late and stops early, therefore making them less productive.

2. Aspect also affects productivity, as sites that face north, northeast, and east are more fertile (likely due to the sun's rays having less of an effect on the soil's dampness). Aspects that faced south to west had variable affects. Also, sites with south, southwest, and south aspects were less productive.

3. Soil must have the necessary substances to meet the conditions needed to grow. The most productive sites have deep, well-drained sandy loam soils, with the second-most being clay soils, and the least productive being gravel soils.

4. Rainfall, especially when it is abundant, greatly increases the tree growth at a site. The most productive sites have an annual precipitation of over 60 inches with less productive sites having an annual precipitation of less than 30 inches. 

Below are short descriptions of the sites the K'avi managers have been collecting data on:
  
1. Site 1: At an altitude of 2,000 feet, an aspect that faces south to west, and annual precipitation of less than 40 inches
2. Site 2: Faces northeast, has well-drained, sandy loam soil and an altitude of 1,500 feet.
3. Site 3: Rainfall of less than 20 inches annually, a southern aspect, and gravel soil
4. Site 4: Sandy loam soil, an altitude of 1,600 feet and 65 inches of rainfall annually.

Below is the data that the forestry managers have been collecting from the different site:
```{r, load in the data}
site_1 <- read.csv("site_1.csv")
site_2 <- read.csv("site_2.csv")
site_3 <- read.csv("site_3.csv")
site_4 <- read.csv("site_4.csv")
```

# PART 2: Exploring the Data

Now that you've loaded in the data from the different sites,insert a code chunk below to explore what the variables are in the data:

```{r, look at the data}
#Use this chunk to look at the data above

head(site_1)
head(site_2)
head(site_3)
head(site_4)

#Could also use dim, glimpse, view....
```

**Class Questions:**

* What are the dimensions of the data from each site? 
* What variables does the data you just loaded in contain? 
* What do these variables mean in the context of forestry management?
* How could this data be used to determine which site is the best choice for forestry? 


**Summary statistics**
Now lets start to explore the differences between the sites with summary statistics. 

**Class Questions**
* What statistics would help you explore the difference in productivity between the different sites? 

You can use the following chunk to perform whichever summary statistics you would find helpful. 

```{r, summary statistics}
# Use this chunk to do any summary statistics you feel would be helpful. 
mean(site_1_new$board_feet)
mean(site_2_new$board_feet)
mean(site_3_new$board_feet)
mean(site_4_new$board_feet)

```

**Class Questions**
* Based on these summary statistics, which site seems like the best site so far? 
* If you were in charge of collecting more data what other factors would you like to consider about each of these different sites that was not provided in this data set?

# PART 3: Combining the sites

Now that you've loaded in and explored that data from each of the sites, it will be useful to combine it in one large data set. Use what you have learned in the previous parts to combine the datasets. 

**We will come back to this when we have read each of the other modules**

```{r}
site_1_new <- site_1 %>%
  mutate(site_ID = 1)
site_2_new <- site_2 %>%
  mutate(site_ID = 2)
site_3_new <- site_3 %>%
  mutate(site_ID = 3)
site_4_new <- site_4 %>%
  mutate(site_ID = 4)

#Use this chunk to combine all the data from each site
forest<- rbind(site_1_new, site_2_new, site_3_new, site_4_new)
```
 
Now calculate the mean board_feet at each site from the new combined data.
```{r, calculating board_feet}
#Use think chunk to calculate the mean board_feet from the combined data, it 
#could be useful to use group_by
forest %>% 
  group_by(site_ID) %>% 
  summarize(mean_age = mean(board_feet))

```

Create a table/tibble with the median age of the trees at each site
```{r, table}
#Use this chunk to create the table
as_tibble(forest) %>% 
  group_by(site_ID) %>% 
  summarize(median_age = median(age))
  
```

# PART 4: Graphing the data

Create a scatterplot of the average board_feet from each site
```{r, graph}
#Use this chunk to create the graph
ggplot(forest, aes(x = age, y = board_feet))+
  geom_point(aes(color = as.factor(site_ID)))
```

**Recap**
You have now explored the data in many different ways. Based on the information from the summary statistics, graph, and descriptions of the sites, which site would you recommend as the best for a lumber harvest and why?
